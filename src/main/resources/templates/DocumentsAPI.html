<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Mini Works API Document</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>

    <!--JQuery-->
    <script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"></script>

    <!--custom css-->
    <link rel="stylesheet" href="/css/Documents.css" type="text/css">
</head>
<body>
    <!-- Header(Fixed) -->
    <div class="navbar" id="header">
        <h4 style="margin: 0;"><img src="/img/spring-boot-logo.svg" style="width: 50px; height: 50px;" /> Spring Boot Project - Mini Works Renewal</h4>
        <nav>
            <button style="float: right;" type="button" class="btn btn-dark">Login</button>
            <button style="float: right; margin-right: 10px;" type="button" class="btn btn-dark">View Chart</button>
        </nav>
    </div>

    <!-- Sidebar(Fixed) -->
    <div id="sidebar">
        <h4 th:text="${userAPIGroup.apiGroupName}"></h4>
        <ul >
            <li th:each="apiInfo : ${userAPIGroup.apiInfoList}">
                <a style="color: white;" th:href="@{/documents/} + ${apiInfo.apiCode}" th:text="${apiInfo.apiNameKorVer}"></a>
            </li>
        </ul>
        <br/>
        <h4 th:text="${orgAPIGroup.apiGroupName}"></h4>
        <ul>
            <li th:each="apiInfo : ${orgAPIGroup.apiInfoList}">
                <a style="color: white;" th:href="@{/documents/} + ${apiInfo.apiCode}" th:text="${apiInfo.apiNameKorVer}"></a>
            </li>
        </ul>
    </div>

    <!-- Main Docuement & API Trying Tool -->
    <div id="document">

        <div id="methodAndURL">
            <span th:id="method" th:text="${apiInfo.httpMethod}"></span>
            <span th:id="URL" th:text="'http://localhost:8080' + ${apiInfo.requestURI}"></span>
        </div>

        <!-- API Document + API Trying Tool -->
        <div id="apiDocumentAndTryingTool">
            <h2 th:text="${apiInfo.apiNameKorVer}"></h2>
            <h6 th:text="${apiInfo.apiDescription}"></h6><br/>

            <script src="/javascript/makeParameterTable.js"></script>

            <!-- Path Parameter Document -->
            <div id="documentPathParameter">
                <h5>Path Parameter</h5>
                <script th:inline="javascript">
                    $(document).ready(function() {
                        var ppfieldInfoList = /*[[ ${apiInfo.pathParameterInfoList} ]]*/ 'default';
                        var documentOutput = makeParameterTable(ppfieldInfoList, 'pathParameterTable');
                        $('#documentPathParameter').append(documentOutput);
                    });
                </script>
            </div>
            <!-- END Path Parameter Document -->

            <!-- Request Body Document (if Necessary) -->
            <div th:id="documentRequestBody" th:if="${apiInfo.requestBodyInfo}">
                <br/><h5>Request Body</h5>
                <script th:inline="javascript">
                    $(document).ready(function() {
                        var rqstfieldInfoList = /*[[ ${apiInfo.requestBodyInfo.fieldInfoList} ]]*/ 'default';
                        var documentOutput = makeParameterTable(rqstfieldInfoList, 'requestBodyTable');
                        $('#documentRequestBody').append(documentOutput);
                    });
                </script>
            </div>
            <!-- END Request Body Document (if Necessary) -->

            <!-- Response Body Document (if Necessary) -->
            <div th:id="documentResponseBody" th:if="${apiInfo.responseBodyInfo}">
                <br/><h5>Response</h5>
                <script th:inline="javascript">
                    $(document).ready(function() {
                        var rspsfieldInfoList = /*[[ ${apiInfo.responseBodyInfo.fieldInfoList} ]]*/ 'default';
                        var documentOutput = makeParameterTable(rspsfieldInfoList, 'responseBodyTable');
                        $('#documentResponseBody').append(documentOutput);
                    });
                </script>
            </div>
            <!-- END Response Body Document (if Necessary) -->

            <!-- API Trying Tool -->
            <br/><br/><h4>Try This API</h4>
            <div id="tryingToolBox">

                <!-- Trying : Path Parameter -->
                <div id="tryingPathParameter">
                    <h6>Path Parameters</h6>
                    <div id="pathParameterTryingBox">
                        <table id="pathParameterTryingTable">
                            <tr th:each="pathParameterInfo : ${apiInfo.pathParameterInfoList}">
                                <td><label th:for="${pathParameterInfo.parameter}" th:text="${pathParameterInfo.parameter}" style="margin-bottom: 0;"></label></td>
                                <td><input class="path-parameter" th:id="${pathParameterInfo.parameter}" type="text" style="width: 400px; size: 12px;" /></td>
                            </tr>
                        </table>
                    </div>
                </div>
                <!-- END Trying : Path Parameter -->

                <!-- Trying : Request Body (if Necessary) -->
                <div th:id="tryingRequestBody" th:if="${apiInfo.requestBodyInfo}">
                    <h6>Request Body</h6>
                    <div id="requestBodyInputForm" style="width: 100%; height: 250px; border: 1px solid #D7D7D7"></div>
                    <script src="/javascript/modelInputGenerator.js"></script>
                    <script th:inline="javascript">
                        $(document).ready(function() {
                            var requestBodyInfo = /*[[ ${apiInfo.requestBodyInfo} ]]*/ 'default';
                            appendModel(requestBodyInfo, document.getElementById('requestBodyInputForm'));
                        });
                    </script>
                </div>
                <!-- END Trying : Request Body (if Necessary) -->

                <!-- Trying : 'Send Request' Button -->
                <button type="button" id="sendRequest" class="btn btn-dark" style="margin-top: 10px;">Send Request</button>


                <!-- Trying : Response -->
                <div>
                    <br/><h6>Response</h6>
                    <textarea id="responseBodyTextArea" readonly="readonly" style="width: 100%; height: 250px; border: 1px solid #D7D7D7"></textarea>
                </div>
                <!-- END Trying : Response -->
            </div>
            <!-- END API Trying Tool -->
        </div>
        <!-- END API Document + API Trying Tool -->
    </div>
    <!-- END Main Docuement & API Trying Tool -->
</body>
</html>